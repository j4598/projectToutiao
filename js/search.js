"use strict";var getData=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=keyWord,n.next=3,$.ajax({url:"../api/search.php",method:"post",data:{findsth:t},dataType:"json"});case 3:data=n.sent,console.log(data),renderHtml(data);case 6:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();function _asyncToGenerator(n){return function(){var s=n.apply(this,arguments);return new Promise(function(i,o){return function t(n,e){try{var r=s[n](e),a=r.value}catch(n){return void o(n)}if(!r.done)return Promise.resolve(a).then(function(n){t("next",n)},function(n){t("throw",n)});i(a)}("next")})}}var keyWord1=location.search.slice(1).split("=")[1],keyWord=decodeURI(keyWord1);getData(keyWord),$("#btn").click(function(){var n=$("#findsth").val();location.href="./search.html?keyWord="+n});var num=30,flag=!0,numBer=void 0;function renderHtml(n){for(var t="",e=0;e<30;e++)t+=' <div class="no-mode">\n                <div class="title-box"><a class="link" index="'+n.list[e].id+'">'+n.list[e].title+'</a></div>\n                <div class="footer-bar">\n                    <div class="footer-bar-left">\n                        <a class="footer-bar-action source">&nbsp;'+n.list[e].author+"&nbsp;⋅</a>\n                    </div>\n                </div>\n            </div>";$(".feed-container").html(t),$(".link").click(function(){var n=this.getAttribute("index");open("./detail.html?id="+n,"_self")})}function render(n){for(var t="",e=num;e<numBer;e++)t+=' <div class="no-mode">\n                <div class="title-box"><a class="link" index="'+n.list[e].id+'">'+n.list[e].title+'</a></div>\n                <div class="footer-bar">\n                    <div class="footer-bar-left">\n                        <a class="footer-bar-action source">&nbsp;'+n.list[e].author+"&nbsp;⋅</a>\n                    </div>\n                </div>\n            </div>";$(".feed-container").append(t),flag=!0,$(".link").click(function(){var n=this.getAttribute("index");open("./detail.html?id="+n,"_self")})}window.addEventListener("scroll",function(){var n=Object.keys(data.list);$(window).scrollTop()+$(window).height()>=$(".feed-container").height()-100&&flag&&(flag=!1,n<(numBer=num+30)&&(numBer=n),render(data),num=numBer)});